<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDtools - Ultimate Hub</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <style>
        :root { --bg: #050505; --panel: #0f0f0f; --accent: #a855f7; --text: #ffffff; --text-dim: #71717a; --border: #27272a; --bazinger: #ff3e3e; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { background: var(--panel); width: 95%; max-width: 1000px; margin: 20px 0; padding: 25px; border: 1px solid var(--border); border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h1 { color: var(--accent); text-transform: uppercase; letter-spacing: 3px; margin: 0 0 15px 0; font-size: 1.8rem; text-align: center; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .full-width { grid-column: span 2; }
        button { background: #000; color: #fff; border: 1px solid var(--border); padding: 14px; font-weight: bold; cursor: pointer; border-radius: 4px; transition: 0.2s; text-transform: uppercase; font-size: 0.85rem; }
        button:hover { border-color: var(--accent); color: var(--accent); transform: translateY(-2px); }
        input, select { background: #000; border: 1px solid var(--border); color: #fff; padding: 12px; border-radius: 4px; width: 100%; box-sizing: border-box; outline: none; margin-bottom: 15px; }
        label { display: block; font-size: 0.75rem; color: var(--accent); margin-bottom: 5px; text-transform: uppercase; }
        .table-wrap { max-height: 500px; overflow-y: auto; border: 1px solid var(--border); background: #000; margin-top: 15px; border-radius: 4px; }
        table { width: 100%; border-collapse: collapse; font-size: 0.9rem; font-family: 'Consolas', monospace; text-align: center; }
        th { position: sticky; top: 0; background: #0a0a0a; color: var(--accent); padding: 12px; border-bottom: 1px solid var(--accent); }
        td { padding: 12px; border-bottom: 1px solid var(--border); }
        .hidden { display: none !important; }
        .help-box { margin-top: 25px; padding: 15px; border-left: 4px solid var(--accent); background: #111; font-size: 0.85rem; line-height: 1.4; color: #ccc; }
    </style>
</head>
<body>

<div id="main-menu" class="container">
    <h1>GDtools</h1>
    <div class="menu-grid">
        <button onclick="showPage('editor-page')">GMD Editor</button>
        <button onclick="showPage('gap-page')">Gap Calculator</button>
        <button onclick="showPage('finder-page')">Gap Finder</button>
        <button onclick="showPage('bazinger-page')" style="color: var(--bazinger); border-color: var(--bazinger);">Bazinger Calc</button>
        <button onclick="window.open('https://zcb3-web.vercel.app/', '_blank')">ZCB3 Web</button>
        <button onclick="window.open('https://conv.nattie.dev/', '_blank')">Macro Converter</button>
        <button class="full-width" onclick="showPage('wolfram-page')">WolframAlpha Solver</button>
    </div>
</div>

<div id="bazinger-page" class="container hidden">
    <h1 style="color: var(--bazinger);">Bazinger Calc</h1>
    <div style="max-width: 400px; margin: 0 auto;">
        <label>Введите размер щели (Gap Size)</label>
        <input type="number" id="bazingerGap" step="0.0000000001" placeholder="Например: 30.00005">
        <button onclick="calculateBazingerDeep()" style="width: 100%; background: var(--bazinger); color: #000;">Рассчитать сложность</button>
    </div>
    <div class="table-wrap">
        <table>
            <thead><tr><th>Speed</th><th>Blocks/Sec</th><th>Result FPS (+1)</th></tr></thead>
            <tbody id="bazingerTable"></tbody>
        </table>
    </div>
    <div class="help-box">
        <b>Bazinger Deep Logic:</b><br>
        1. Сначала вычисляется базовый FPS для 1x скорости по формуле $FPS = 311.579742 / (Gap - 3)$.<br>
        2. Затем этот FPS умножается на коэффициент разницы скоростей ($Blocks/Sec$).
    </div>
    <button style="width:100%; margin-top:30px; background:#18181b" onclick="showPage('main-menu')">Назад</button>
</div>

<script>
    const b_speeds = { "0.5": 8.37193493, "1.0": 10.38592002, "2.0": 12.91390686, "3.0": 15.59989392, "4.0": 19.19986483 };
    const k_1x = 311.579742;

    function showPage(id) {
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function calculateBazingerDeep() {
        const gap = parseFloat(document.getElementById('bazingerGap').value);
        if (!gap || gap <= 3) return alert("Введите корректный размер щели (> 3)");

        const tbody = document.getElementById('bazingerTable');
        tbody.innerHTML = "";

        // Находим FPS для 1x скорости
        const baseFps_1x = k_1x / (gap - 3);
        const baseSpeed = b_speeds["1.0"];

        Object.keys(b_speeds).forEach(s => {
            const currentSpeed = b_speeds[s];
            const ratio = currentSpeed / baseSpeed;
            
            // Расчет: FPS на 1x * разница скоростей + 1
            const finalFps = Math.ceil(baseFps_1x * ratio) + 1;
            
            tbody.innerHTML += `
                <tr>
                    <td>${s}x</td>
                    <td>${currentSpeed}</td>
                    <td><b style="color:var(--bazinger)">${finalFps.toLocaleString()} FPS</b></td>
                </tr>
            `;
        });
    }

    // Здесь функции findGaps, calculatePreciseGap, loadGMD, saveGMD из прошлого кода...
    // (Оставил их в логике, чтобы сайт был полным)
</script>
</body>
</html>
