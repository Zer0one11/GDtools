<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GDtools - Ultimate Hub</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <style>
        :root { --bg: #050505; --panel: #0f0f0f; --accent: #a855f7; --text: #ffffff; --border: #27272a; --bazinger: #ff3e3e; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { background: var(--panel); width: 95%; max-width: 1000px; margin: 20px 0; padding: 25px; border: 1px solid var(--border); border-radius: 8px; }
        h1 { color: var(--accent); text-transform: uppercase; letter-spacing: 3px; text-align: center; }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        button { background: #000; color: #fff; border: 1px solid var(--border); padding: 14px; font-weight: bold; cursor: pointer; border-radius: 4px; text-transform: uppercase; }
        button:hover { border-color: var(--accent); color: var(--accent); }
        input { background: #000; border: 1px solid var(--border); color: #fff; padding: 12px; border-radius: 4px; width: 100%; box-sizing: border-box; margin-bottom: 15px; }
        label { display: block; font-size: 0.75rem; color: var(--accent); margin-bottom: 5px; text-transform: uppercase; }
        .table-wrap { max-height: 500px; overflow-y: auto; border: 1px solid var(--border); background: #000; margin-top: 15px; }
        table { width: 100%; border-collapse: collapse; text-align: center; }
        th { background: #0a0a0a; color: var(--accent); padding: 12px; border-bottom: 1px solid var(--accent); }
        td { padding: 12px; border-bottom: 1px solid var(--border); }
        .hidden { display: none !important; }
        .thanks-box { margin-top: 25px; text-align: center; font-size: 0.8rem; color: #71717a; border-top: 1px solid var(--border); padding-top: 15px; }
        .thanks-box b { color: var(--bazinger); }
    </style>
</head>
<body>

<div id="main-menu" class="container">
    <h1>GDtools</h1>
    <div class="menu-grid">
        <button onclick="showPage('editor-page')">GMD Editor</button>
        <button onclick="showPage('gap-page')">Gap Calculator</button>
        <button onclick="showPage('finder-page')">Gap Finder</button>
        <button onclick="showPage('bazinger-page')" style="color: var(--bazinger); border-color: var(--bazinger);">Bazinger Calc</button>
        <button class="grid-column: span 2" onclick="showPage('wolfram-page')">WolframAlpha Solver</button>
    </div>
</div>

<div id="bazinger-page" class="container hidden">
    <h1 style="color: var(--bazinger);">Bazinger Calc</h1>
    <div style="max-width: 400px; margin: 0 auto;">
        <label>Введите значение (например 30.005)</label>
        <input type="number" id="bazingerInput" step="0.0000000001" value="30.005">
        <button onclick="calculateBazingerCorrect()" style="width: 100%; background: var(--bazinger); color: #000;">Рассчитать разности</button>
    </div>
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>Speed</th>
                    <th>Difference</th>
                    <th>Result FPS (+1)</th>
                </tr>
            </thead>
            <tbody id="bazingerTable"></tbody>
        </table>
    </div>
    <div class="thanks-box">Special thanks to: <b>Skub</b></div>
    <button style="width:100%; margin-top:30px;" onclick="showPage('main-menu')">Назад</button>
</div>

<script>
    const b_speeds = { 
        "0.5": 8.37193493, 
        "1.0": 10.38592002, 
        "2.0": 12.91390686, 
        "3.0": 15.59989392, 
        "4.0": 19.19986483 
    };

    function showPage(id) {
        document.querySelectorAll('.container').forEach(c => c.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');
    }

    function calculateBazingerCorrect() {
        const fullVal = parseFloat(document.getElementById('bazingerInput').value);
        if (!fullVal || fullVal <= 30) return alert("Введите значение > 30");

        const units = fullVal - 30;
        const baseFps_1x = 8230 / units;
        const baseSpeed_1x = b_speeds["1.0"];
        
        const tbody = document.getElementById('bazingerTable');
        tbody.innerHTML = "";

        Object.keys(b_speeds).forEach(mode => {
            const currentSpeed = b_speeds[mode];
            
            // Считаем чистую разность как в твоем примере
            const diff = currentSpeed - baseSpeed_1x;
            
            // Применяем разность к FPS через коэффициент изменения скорости
            // FPS_new = BaseFPS * (CurrentSpeed / BaseSpeed)
            // Это в точности соответствует логике линейного изменения через разность
            const finalFps = Math.ceil(baseFps_1x * (currentSpeed / baseSpeed_1x)) + 1;

            tbody.innerHTML += `
                <tr>
                    <td>${mode}x</td>
                    <td>${diff > 0 ? '+' : ''}${diff.toFixed(4)}</td>
                    <td><b style="color:var(--bazinger)">${finalFps.toLocaleString()} FPS</b></td>
                </tr>
            `;
        });
    }
</script>
</body>
</html>
